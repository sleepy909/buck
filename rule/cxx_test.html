<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><script>var loc = new String(window.location); if (loc.indexOf('facebook.github.io/buck') != -1) {window.location.replace(loc.replace('facebook.github.io/buck', 'buckbuild.com'));}</script><title>Buck: cxx_test()</title><link type="image/png" rel="shortcut icon" href="/static/favicon.png" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/google-code-prettify/prettify.css" ><link type="text/css" rel="stylesheet" href="/static/buck.css"><meta property="og:locale" content="en_US"><meta property="og:title" content="cxx_test()"><meta property="og:site_name" content="Buck: a build tool"><meta property="og:image" content="http://buckbuild.com/static/og.png"><meta property="og:type" content="article"><meta property="og:description" content="A cxx_test() rule builds a native C/C++ executable."><meta property="fb:admins" content="584556688222168"></head><body><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><header class='topbar'><nav class='width'><a href='http://buckbuild.com/'><h1>Buck</h1></a><ul class='menu'><li><a href='/setup/quick_start.html'>Get Started</a><li><a href='https://groups.google.com/forum/#!forum/buck-build'>Group</a><li><a href='/javadoc/'>API</a><li><a href='https://github.com/facebook/buck'>GitHub</a></ul></nav></header><section class='content'><div class='width'><article><h1>cxx_test()</h1><div class="overview"><p><small>This is liable to change in the future.</small></p>A cxx_test() rule builds a C/C++ binary against a C/C++ testing framework and runs it as part of <code>buck test</code>.<h2>Arguments</h2><ul class="arglist"><li class="arg"><code>name</code> (required) The name of the rule.<li class="arg"><code>srcs</code> (defaults to <code>[]</code>) The set of C, C++, or assembler source files to be preprocessed, compiled, and assembled by this rule.  We determine which stages to run on each input source based on it's file extension. See the <a href="https://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html">GCC documentation</a> for more detail on how file extensions are interpreted. Each element can be either a string specifying a source file (e.g. <code>'foo/bar.c'</code>) or a tuple of a string specifying a source file and a list of compilation flags (e.g. <code>('foo/bar.c', ['-Wall', '-Werror'])</code>). In the latter case the specified flags will be used in addition to the rule's other flags when preprocessing and compiling that file (if applicable).<li class="arg"><code>headers</code> (defaults to <code>[]</code>) The set of header files that are made available for inclusion to the source files in the target and all targets that transitively depend on it. These should be specified as either a list of header files or a dictionary of header names to header files. The header name can contain forward slashes (<code>/</code>).  The headers can be included with <code>#include "$HEADER_NAMESPACE/$HEADER_NAME"</code> or <code>#include &lt;$HEADER_NAMESPACE/$HEADER_NAME&gt;</code>, where <code>$HEADER_NAMESPACE</code> is the value of the target's <code>header_namespace</code> attribute, and <code>$HEADER_NAME</code> is the header name if specified, and the filename of the header file otherwise. See <code>header_namespace</code> for more information.<li class="arg"><code>preprocessor_flags</code> (defaults to <code>[]</code>) Flags to use when preprocessing any of the above sources (which require preprocessing).<li class="arg"><code>compiler_flags</code> (defaults to <code>[]</code>) Flags to use when compiling any of the above sources (which require compilation).<li class="arg"><code>linker_flags</code> (defaults to <code>[]</code>) Flags to use whenever this rule is involved in a link operation (e.g linked into an executable or shared library).<li class="arg"><code>framework</code> (defaults to <code>&quot;gtest&quot;</code>) The testing framework to build against and run with. We currently support <a href="https://code.google.com/p/googletest/"><code>gtest</code></a> and <a href="http://www.boost.org/doc/libs/1_57_0/libs/test/doc/html/index.html"><code>boost</code></a>.<li class="arg"><code>env</code> (defaults to <code>{}</code>) A map of environment names and values to set when running the test.<li class="arg"><code>run_test_separately</code> (defaults to <code>false</code>) If set to <code>true</code>, the test(s) in this rule are run separately from all other tests. (This is useful for integration tests which access a physical device or other limited resource.)<p>If unset, the test(s) in this rule in parallel with all other tests.</p><li class="arg"><code>visibility</code> (defaults to <code>[]</code>) List of <a href="/concept/build_target_pattern.html">build target patterns</a> that identify the build rules that can include this rule in its <code>deps</code>.</ul><h2>Examples</h2><pre class="prettyprint lang-py">
# A rule that builds and runs C/C++ test using gtest.
cxx_test(
  name = 'echo_test',
  srcs = [
    'echo_test.cpp',
  ],
)
</pre></div></article><nav><h3>Getting Started</h3><ul><li><a href="/">Overview</a><li><a href="/setup/quick_start.html">Quick Start</a><li><a href="/setup/install.html">Downloading and Installing Buck</a><li><a href="/article/exopackage.html">Exopackage</a></ul><h3>About</h3><ul><li><a href="/concept/what_makes_buck_so_fast.html">What Makes Buck so Fast?</a><li><a href="/concept/troubleshooting.html">Troubleshooting</a><li><a href="/about/performance_tuning.html">Performance Tuning</a><li><a href="/concept/faq.html">FAQ</a><li><a href="/presentations/">Learn More (Buck Presentations)</a></ul><h3>Concepts</h3><ul><li><a href="/concept/build_rule.html">Build Rule</a><li><a href="/concept/build_target.html">Build Target</a><li><a href="/concept/build_file.html">Build File</a><li><a href="/concept/buckversion.html">.buckversion</a><li><a href="/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/concept/buckjavaargs.html">.buckjavaargs</a><li><a href="/concept/buckconfig.html">.buckconfig</a><li><a href="/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/concept/visibility.html">Visibility</a><li><a href="/concept/http_cache_api.html">HTTP Cache API</a></ul><h3>Build Rules</h3><ul><li><strong>Core</strong></li><li><a href="/rule/genrule.html">genrule()</a><li><a href="/rule/remote_file.html">remote_file()</a><li><strong>Android</strong></li><li><a href="/rule/android_aar.html">android_aar()</a><li><a href="/rule/android_binary.html">android_binary()</a><li><a href="/rule/android_build_config.html">android_build_config()</a><li><a href="/rule/android_instrumentation_apk.html">android_instrumentation_apk()</a><li><a href="/rule/android_instrumentation_test.html">android_instrumentation_test()</a><li><a href="/rule/android_library.html">android_library()</a><li><a href="/rule/android_manifest.html">android_manifest()</a><li><a href="/rule/android_prebuilt_aar.html">android_prebuilt_aar()</a><li><a href="/rule/android_resource.html">android_resource()</a><li><a href="/rule/apk_genrule.html">apk_genrule()</a><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/gen_aidl.html">gen_aidl()</a><li><a href="/rule/keystore.html">keystore()</a><li><a href="/rule/ndk_library.html">ndk_library()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/rule/project_config.html">project_config()</a><li><strong>CXX</strong></li><li><a href="/rule/cxx_binary.html">cxx_binary()</a><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/cxx_test.html">cxx_test()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><strong>D</strong></li><li><a href="/rule/d_binary.html">d_binary()</a><li><a href="/rule/d_library.html">d_library()</a><li><a href="/rule/d_test.html">d_test()</a><li><strong>Java</strong></li><li><a href="/rule/cxx_library.html">cxx_library()</a><li><a href="/rule/java_binary.html">java_binary()</a><li><a href="/rule/java_library.html">java_library()</a><li><a href="/rule/java_test.html">java_test()</a><li><a href="/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><strong>Python</strong></li><li><a href="/rule/prebuilt_python_library.html">prebuilt_python_library()</a><li><a href="/rule/python_binary.html">python_binary()</a><li><a href="/rule/python_library.html">python_library()</a><li><a href="/rule/python_test.html">python_test()</a><li><strong>Rust</strong></li><li><a href="/rule/rust_binary.html">rust_binary()</a><li><a href="/rule/rust_library.html">rust_library()</a></ul><h3>Functions</h3><ul><li><a href="/function/glob.html">glob()</a><li><a href="/function/include_defs.html">include_defs()</a><li><a href="/function/string_parameter_macros.html">String Parameter Macros</a></ul><h3>Commands</h3><ul><li><a href="/command/common_parameters.html">Common Parameters</a><li><a href="/command/audit.html">buck audit</a><li><a href="/command/build.html">buck build</a><li><a href="/command/clean.html">buck clean</a><li><a href="/command/fetch.html">buck fetch</a><li><a href="/command/install.html">buck install</a><li><a href="/command/project.html">buck project</a><li><a href="/command/quickstart.html">buck quickstart</a><li><a href="/command/server.html">buck server</a><li><a href="/command/targets.html">buck targets</a><li><a href="/command/test.html">buck test</a><li><a href="/command/uninstall.html">buck uninstall</a><li><a href="/command/buckd.html">buckd</a></ul><h3>Extending Buck</h3><ul><li><a href="/extending/macros.html">Custom Macros</a><li><a href="/extending/rules.html">Custom Rules</a></ul><h3>Contributing to Buck</h3><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/contributing/tour.html">Tour of the Codebase</a><li><a href="/contributing/development.html">Development Workflow</a><li><a href="/contributing/codestyle.html">Code Style</a><li><a href="/contributing/logging.html">Logging</a><li><a href="/contributing/immutables.html">Immutable Value Types</a><li><a href="/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></nav></div></section><footer><div class='width'>&copy; Copyright Facebook, 2013 -</div></footer><script src="/google-code-prettify/prettify.js"></script><script>prettyPrint()</script></body></html>